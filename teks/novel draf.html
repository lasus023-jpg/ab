<!DOCTYPE html>
<html lang="in">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Judul paraaah</title>
   
    <link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Inter&family=Roboto+Mono&display=swap" rel="stylesheet">
    
   <style>
       
              
        /* Variabel warna default (mode terang) */
:root {
    --bg-color: #ffffff;
    --text-color: #333333;
    --button-bg: #4CAF50;
    --button-text: #ffffff;
}

/* Variabel warna untuk mode gelap */
body.dark-mode {
    --bg-color: #1a1a1a;
    --text-color: #ffffff;
    --button-bg: #2196F3;
    --button-text: #ffffff;
}

/* Gaya dasar halaman */
body {
    margin: 0;
    padding: 0rem;
    font-family: Arial, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: background-color 0.3s ease, color 0.3s ease; /* Animasi perpindahan */
}

.container {
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
}

button:hover {
    opacity: 0.9;
}

/* Deteksi preferensi sistem (jika belum ada pengaturan pengguna) */
@media (prefers-color-scheme: dark) {
    body:not(.light-mode) {
        --bg-color: #1a1a1a;
        --text-color: #ffffff;
        --button-bg: #2196F3;
    }
}



 
  
        
        /* Styling Preview */
        .bab-box {
            margin-top: 10px;
            padding: 15px;
            background: rgba(0,0,0,0.05);
            border-radius: 6px;
            font-family: MERRIWEATHER;
            font-size: 0.95em;
            line-height: 1.6;
            white-space: pre-wrap;
            border-left: 5px solid var(--accent);
        }


       
        
        
         /* Header */
        header {
            
            
          padding: 1.5rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
        
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        #waline {
  display: shown; 
  margin-top: 1rem;
}

mark.highlight {
  background-color: #ffe066;
  padding: 0.1em;
  border-radius: 3px;
}
       
       
   </style>
   
   
   
   <link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v3/dist/waline.css"
  />
   
</head>
<body>
    
   
<header>
    Judul Novel (Menulis Kode)
<div class="header-content">
   


<button id="stabiloBtn" class="content">STABILO</button>

<button id="toggleMode">tets</button>

</div>
</header>






<!-- Kontainer bab (misal yang udah ada sebelumnya) -->
<div class="bab-box"id="bab-1-container">file kosong</div>

<div class="bab-box"id="bab-2-container">file kosong</div> 

<div class="bab-box"id="bab-3-container">file kosong</div> 

<!-- Tambah jika ada bab lain -->

<br>




<script>
    
    // Dapatkan elemen tombol dan body
const toggleButton = document.getElementById('toggleMode');
const body = document.body;

// Fungsi untuk memuat pengaturan dari localStorage
function loadMode() {
    const savedMode = localStorage.getItem('themeMode');
    if (savedMode === 'dark') {
        enableDarkMode();
    } else if (savedMode === 'light') {
        enableLightMode();
    } else {
        // Gunakan preferensi sistem jika tidak ada pengaturan
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            enableDarkMode();
        } else {
            enableLightMode();
        }
    }
}

// Fungsi untuk mengaktifkan mode gelap
function enableDarkMode() {
    body.classList.add('dark-mode');
    body.classList.remove('light-mode');
    toggleButton.textContent = 'Ganti ke Mode Terang';
    localStorage.setItem('themeMode', 'dark');
}

// Fungsi untuk mengaktifkan mode terang
function enableLightMode() {
    body.classList.remove('dark-mode');
    body.classList.add('light-mode');
    toggleButton.textContent = 'Ganti ke Mode Gelap';
    localStorage.setItem('themeMode', 'light');
}

// Tambahkan event listener pada tombol
toggleButton.addEventListener('click', () => {
    if (body.classList.contains('dark-mode')) {
        enableLightMode();
    } else {
        enableDarkMode();
    }
});

// Muat pengaturan saat halaman dimulai
loadMode();


/* tambah bab dan muat */
function muatTXT(namaFile, idContainer) {
  fetch(namaFile)
    .then(response => {
      if (!response.ok) throw new Error("File tidak ditemukan");
      return response.text();
    })
    .then(teks => {
      document.getElementById(idContainer).innerText = teks;
    })
    .catch(error => console.log(error));
}

muatTXT("bab1.txt", "bab-1-container");
muatTXT("bab2.txt", "bab-2-container");
muatTXT("bab3.txt", "bab-3-container");



</script>

<div id="waline"></div>
  <script type="module">
    import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

    init({
      el: '#waline',
      serverURL: 'https://wl-c.vercel.app',
      lang: 'en',
    });
  </script>
    
    <script>
let selectedText = "";

document.addEventListener("selectionchange", () => {
  selectedText = window.getSelection().toString().trim();
});

document.getElementById("stabiloBtn").addEventListener("click", () => {
  if (!selectedText) {
    alert("Blok teks dulu sebelum menekan STABILO ðŸ™‚");
    return;
  }

  const waline = document.getElementById("waline");
  waline.style.display = "block";

  const pageTitle = document.title;
  const pageLink = location.href;

  setTimeout(() => {
    const textarea = waline.querySelector("textarea");
    if (textarea) {
      textarea.value =
`ðŸ“– ${pageTitle}
ðŸ”— ${pageLink}

> ${selectedText}

`;
      textarea.focus();
    }
  }, 500);

  waline.scrollIntoView({ behavior: "smooth", block: "start" });
});
</script>


    

<script>
const STORAGE_KEY = "permanentHighlights";

// simpan highlight
function saveHighlights() {
  localStorage.setItem(STORAGE_KEY, document.querySelector('.container')?.innerHTML || document.body.innerHTML);
}

// muat highlight
function loadHighlights() {
  const saved = localStorage.getItem(STORAGE_KEY);
  if (saved) {
    document.querySelector('.container')?.innerHTML = saved;
  }
}

document.getElementById("stabiloBtn").addEventListener("click", () => {
  const selection = window.getSelection();
  if (!selection.rangeCount) return;

  const range = selection.getRangeAt(0);
  if (range.collapsed) return;

  const mark = document.createElement("mark");
  mark.className = "highlight";

  range.surroundContents(mark);
  selection.removeAllRanges();

  saveHighlights();
});

// pulihkan saat reload
window.addEventListener("load", loadHighlights);
</script>


    
    
    
</body>
</html>
